<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
 xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
 layout:decorate="~{inc/layout}">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
	
    <!-- component css -->
    <link rel="stylesheet" href="/css/member/component/profile-box.css">
    <link rel="stylesheet" href="/css/member/component/meeting-info.css">
    <link rel="stylesheet" href="/css/member/component/participant.css" >
    <link rel="stylesheet" href="/css/member/component/comment.css" />
    <link rel="stylesheet" href="/css/member/component/reply.css" />
    <link rel="stylesheet" href="/css/member/popup.css">
    <link rel="stylesheet" href="/css/member/component/modal-2.css">
    <!-- detail page css -->
    <link rel="stylesheet" href="/css/member/meeting/detail.css">
    <script src="/js/meeting/detail.js"></script>
    <script type="module" src="/js/comment/comment.js"></script>
    <script type="module" src="/js/comment/edit-comment.js"></script>

</head>
<body>
<!-- header.html 모임글 상세조회 화면 헤더(로그인 O) -->

<main class="main"  layout:fragment="content">
	<span hidden class="member-id" th:text="${session.memberId}"></span>
    <section class="meeting">
        <div class="meeting__info">
            <div class="meeting__category-wrap">
                <span class="meeting__category"  th:text="${meeting.categoryName}">문화생활</span>
            </div>
            <div class="meeting__header">
                <div class="meeting__title-container">
                <span class="hidden meeting-id" th:text="${meeting.id}"></span>
                    <span class="meeting__title"  th:text="${meeting.title}">한강공원에서 러닝하실 분~🙂</span>
                    <img class="meeting__title-hambuger-icon" src="/images/icon/hambuger.svg">
                    <th:block th:if="${userType== 3}">		
                    		<div sec:authorize="isAuthenticated()" th:replace="~{inc/meeting-detail-modal::member-host}"></div>
                    </th:block>
                    <th:block th:if="${userType== 2}">
                    		<div sec:authorize="isAuthenticated()" th:replace="~{inc/meeting-detail-modal::member-participant}"></div>
                    </th:block>
                       <th:block th:if="${userType== 1}">
                    		<div sec:authorize="isAuthenticated()" th:replace="~{inc/meeting-detail-modal::member}"></div>
                    </th:block>
                </div>
                <div class="meeting__date-container">
                    <img class="meeting__small-calander" src="/images/icon/small-calander.svg">
                    <span class="meeting__date"  th:text="${meeting.textStartedAt}">일시</span>
                </div>
                <div class="meeting__region-container">
                    <img class="meeting__small-location" src="/images/icon/small-location.svg" alt="">
                    <span class="meeting__region"  th:text="${meeting.regionName}">지역</span>
                </div>
                <div class="meeting__detail-region-wrap">
                    <span class="meeting__detail-region"  th:text="${meeting.detailRegion}">상세장소</span>
                </div>
            </div>
        </div>
        <div class="meeting__conetent-container">
                    <span class="meeting__content"  th:utext="${meeting.content}">
                        내용
                    </span>
            <div class="meeting__tags">
                <span th:text="|#${meeting.ageRange}|">나이</span>
                <span th:text="|#${meeting.maxMember}명|">인원</span>
                <span th:text="|#${meeting.genderCategory}|">성별</span>
            </div>
            <div class="meeting__views"  th:text="|조회수${meeting.viewCount}|">조회수</div>
            <div class="meeting__btn">
                <span class="btn btn-round btn-join btn-action" id="participation-btn"  data-modal="#modal-wrapper-participation">참여하기</span>
            </div>
        </div>
    </section>
	
    <section class="participant">
        <div class="participant__num">
            <span>참가자</span>
            <span class="participant-count" th:text="${#lists.size(meeting.participants)}">참가자수</span>
            <span>/</span>
            <span th:text="${meeting.maxMember}">10</span>
            <span class="icon pointer icon-arrow-up"></span>
            <span class="icon pointer hidden icon-arrow-down"></span>
        </div>
        <ul class="participant__list">
            <li th:each="participant:${meeting.participants}">
            <div class="participant__info">
                <img 
                    th:src="@{${participant.profileImagePath}?${participant.profileImagePath}:'/images/icon/user-profile.svg'}">
                <span th:text="${participant.nickname}"></span>
            </div>
            </li>
        </ul>
    </section>
			
   <!------ 참여 모달 ------>
     <div class="modal-2 hidden" id="modal-wrapper-participation">

        <div class="modal-participation">
            <div class="modal__header">
                <span class="modal__x-icon pointer modal__close-btn" data-modal="#modal-wrapper-participation"></span>
            </div>
            <div class="modal__body">
                <div class="modal-participation-content">
                    <div class="modal-icon">
                        <img src="/images/icon/handshake24.svg">
                    </div>
                    <div class="modal-text">
                        <strong th:text="${meeting.title}">
                            제목
                        </strong>
                        <div class="next-line">이 모임에 참여하시겠어요?</div>
                    </div>
                </div>
                <div class="btn-modal">
                    <div class="btn-modal-left  modal__close-btn pointer" data-modal="#modal-wrapper-participation">다음에 할래요</div>
                    <div class="btn-modal-right modal__close-btn pointer" data-modal="#modal-wrapper-participation">참여하기</div>
                </div>
            </div>
        </div>
    </div>
    
    <!--------------- 댓글 섹션 -------------------->
    <section class="comment">
			<h2 class="comment__num" th:text="'댓글 ' + ${meeting.commentCount}+' 개'">N</h2>
			<div class="comment__input-container">
				<textarea class="comment__input" name="comment-text"
					id="comment-text" placeholder="댓글을 입력하세요."></textarea>
				<span class="comment__btn btn btn-round btn-action" id="register-btn">등록하기</span>
				<span class="hidden comment__btn btn btn-round" id="edit-save-btn">저장하기</span>
			</div>
			<ul class="comment__list">

				<li th:each="comment:${meeting.comments}">
					<div class="profile">
						<span class="profile__image" th:text="${comment.profileImgPath}"></span>
						<span class="profile__nickname" th:text="${comment.nickname}">닉네임</span>
						<span class="profile__time" th:text="${comment.elapsedTime}">경과시간</span>
						<span class="hidden comment-id" th:text="${comment.id}">경과시간</span>
						<button></button>
		                    <th:block th:if="${comment.isMyComment}">
		                    		<div sec:authorize="isAuthenticated()" th:replace="~{inc/meeting-detail-modal::writer}"></div>
		                    </th:block>
		                       <th:block th:if="${!comment.isMyComment}">
		                    		<div sec:authorize="isAuthenticated()" th:replace="~{inc/meeting-detail-modal::reader}"></div>
		                    </th:block>
					</div>
                    <span class="comment__content" th:text="${comment.content}">
                        댓글 내용
					</span>
					<div class="comment__replies">
						<span class="hidden comment-id" th:text="${comment.id}">댓글아이디</span>
						<span class="pointer underline reply-cnt"
							th:classappend="(${comment.countOfReply}==0)? 'hidden'"
							th:text="'답글 ' + ${comment.countOfReply}+'개'"></span> <span
							class="hidden pointer reply-close">닫기</span> <span
							class="pointer underline reply-write">답글 달기</span>
					</div>
					<section class="reply hidden">
						<ul class="reply__list">

						</ul>
					</section>
				</li>
			</ul>
		</section>
    </main>
</body>


</html>